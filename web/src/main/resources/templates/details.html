<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title th:text="${data.dataSource}+' PDX model '+${data.modelId}+ ' details - PDX Finder'"></title>
    <meta name="description" th:content="'Model details for PDX '+${data.modelId}+', produced by '+${data.dataSource}"/>
    <meta name="keywords"
          th:content="'Patient Derived Xenograft, PDX, PDX Finder, Cancer, Oncology, Life Sciences, '+${data.dataSource}"/>
    <meta name="author" content="PDX Finder"/>
    <meta name="HandheldFriendly" content="true"/>
    <meta name="MobileOptimized" content="width"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>

    <link rel="apple-touch-icon" sizes="180x180"
          href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/apple-touch-icon.png?v=1">
    <link rel="icon" type="image/png" sizes="32x32"
          href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/favicon-32x32.png?v=1">
    <link rel="icon" type="image/png" sizes="16x16"
          href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/favicon-16x16.png?v=1">
    <link rel="manifest" href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/manifest.json?v=1">
    <link rel="mask-icon" href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/safari-pinned-tab.svg?v=1"
          color="#0032a0">
    <link rel="shortcut icon" href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/favicon.ico?v=1">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <meta name="apple-mobile-web-app-title" content="PDX Finder">
    <meta name="application-name" content="PDX Finder">
    <meta name="msapplication-config"
          content="https://ebiwd.github.io/pdx-visual-framework/images/favicons/browserconfig.xml?v=1">
    <meta name="theme-color" content="#0032a0">

    <link rel="stylesheet" href="https://dev.ebi.emblstatic.net/web_guidelines/EBI-Icon-fonts/v1.2/fonts.css"
          type="text/css" media="all"/>

    <link rel="stylesheet"
          href="https://ebi.emblstatic.net/web_guidelines/EBI-Framework/v1.2/libraries/Choices/assets/styles/css/choices.min.css">

    <link rel="stylesheet" th:href="@{/css/app.min.css}" type="text/css" media="all"/>
    <link rel="stylesheet" th:href="@{/css/customStyles.css}" type="text/css" media="all"/>

    <!-- end CSS-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script th:src="@{/js/jquery.dataTables.js}"></script>
    <script th:src="@{/js/scroller.js}"></script>

    <!--/*/ <th:block th:include="fragments/shared :: header"></th:block> /*/-->

</head>

<body class="level2">

<div content="content-wrapper">
    <div id="skip-to">
        <a href="#content">Skip to main content</a>
    </div>

    <div id="content">

        <!--/*/ <th:block th:include="fragments/shared :: menu"></th:block> /*/-->

        <!-- Suggested layout containers -->
        <section id="main-content-area" role="main">


            <div class="row">
                <nav aria-label="You are here:" role="navigation">
                    <ul class="breadcrumbs columns">
                        <li><a href="/">Home</a></li>
                        <li>
                            Details
                        </li>
                        <li>
                            <span class="show-for-sr">Current: </span> <span th:text="${data.modelId}">Model ID</span>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Three Grids Section-->
            <section>
                <div class="row">

                    <div class="columns medium-4 small-12 margin-top-30">
                        <h4 class="pdxBig"><span class="float-left border-color-black"
                                                 th:text="${data.modelId+': '+data.mappedOntologyTermLabel}"></span>
                        </h4>
                    </div>

                    <div class="columns medium-4 small-12 margin-top-30">
                        <h4 class="pdxBig black"><span class="float-left" th:text="${data.providerName}"> The Jackson Laboratory </span>
                        </h4>
                    </div>

                    <div class="columns medium-4 small-12 shiftUp20">
                                                <!--
                                                <a th:href="@{'mailto:'+${data.contactProviderUrl+'?subject='+data.modelId}}"
                                                   th:if="${ data.contactProviderUrl != null && #strings.contains(data.contactProviderUrl,'@')}">
                                                    <h4 class="button more uppercase margin-top-large minwidth300 card-3b">Contact Provider</h4>
                                                </a>
                                                -->

                                                <a th:href="@{'mailto:'+${data.contactProviderUrl+'?subject='+data.modelId}}"
                                                   th:if="${data.contactProviderUrl != null &&  #strings.contains(data.contactProviderUrl,'@')}">
                                                    <h4 class="button more uppercase margin-top-large minwidth300 card-3b">Contact Provider</h4>
                                                </a>

                                                <a th:href="@{${data.contactProviderUrl}}" th:target="_blank"
                                                   th:if="${data.contactProviderUrl != null && #strings.contains(data.contactProviderUrl,'http') }">
                                                    <h4 class="button more uppercase margin-top-large minwidth300 card-3b">Contact Provider</h4>
                                                </a>



                                                <a th:href="@{${data.viewDataAtUrl}}" th:target="_blank"
                                                   th:if="${data.viewDataAtUrl != null && #strings.contains(data.viewDataAtUrl,'http')}">
                                                    <h4 class="button outline uppercase margin-top-large minwidth300 shiftUp10 card-3b"
                                                        th:text="${data.viewDataAtLabel}">View at Provider</h4>
                                                </a>

                        <a th:href="@{'/pdx/'+${data.dataSource}+'/'+${data.modelId}+'/pdf'}"
                           th:target="_blank"
                           class="button outline uppercase margin-top-large minwidth300 shiftUp10 card-3b">
                            <span> Download PDF <i class="icon icon-functional" data-icon="="></i> </span>
                        </a>

                    </div>
                </div>
            </section>
            <hr class="margin-vertical-20 line_v2">


            <!-- Tabs Section -->
            <section class="row large-10 medium-12 expanded" id="detailsData">

                <div class="row large-12 medium-12 expanded">
                    <ul class="tabs style-2" data-deep-link="true" data-tabs id="example2-tabs">

                        <li class="tabs-title is-active">
                            <a href="#summary" aria-selected="true" style="font-size: 15px; padding: 15px;"> PDX
                                Model </a>
                        </li>


                        <li class="tabs-title">
                            <a href="#patients" style="font-size: 15px; padding: 15px;"> Patient </a>
                        </li>


                        <li th:if="${ #lists.isEmpty(data.molecularDataRows)}"
                            class="tabs-title ">
                            <a href="#variation" style="font-size: 15px; padding: 15px;" id="variation_data_link"
                               onclick="initTabs('0')">
                                Molecular Data (0)
                            </a>
                        </li>

                        <li th:if="${ not #lists.isEmpty(data.molecularDataRows) }"
                            class="tabs-title ">
                            <a href="#variation" style="font-size: 15px; padding: 15px;" id="variation_data_link"
                               onclick="initTabs('0')">
                                Molecular Data
                                (<span th:text="${data.molecularDataEntrySize}"> ... </span>)
                            </a>
                        </li>


                        <li th:if="${data.dosingStudyNumbers} == 0" class="tabs-title">
                            <a href="#dosing_studies" style="font-size: 15px; padding: 15px;">Dosing study (0)</a>
                        </li>


                        <li th:if="${data.dosingStudyNumbers} > 0" class="tabs-title">
                            <a href="#dosing_studies" style="font-size: 15px; padding: 15px;">Dosing study (1)</a>
                        </li>


                    </ul>

                </div>

                <div class="tabs-content style-2" data-tabs-content="example2-tabs">

                    <div class="tabs-panel is-active" id="summary">


                        <!-- Summary first row -->
                        <div class="row large-12 medium-12 expanded">

                            <div class="columns medium-12 small-12 margin-top-30 card-3">
                               <div class="responsive-table top-space-20">
                                   <table class="datatable-pdx table-borderedPdx pdx-table head-left">
                                       <thead>
                                       <tr>
                                           <th colspan="2"> Related Models </th>
                                       </tr>
                                       </thead>
                                       <tbody>
                                       <tr th:if="${not #lists.isEmpty(data.relatedModels)}">
                                           <th class="text-left"> Models </th>
                                           <td><span th:each="relMod:${data.relatedModels}"><a th:text="${relMod}"
                                                                                               th:href="@{'/pdx/'+${data.dataSource}+'/'+${relMod}}"></a> </span>
                                           </td>
                                       </tr>
                                       </tbody>
                                   </table>
                               </div>
                           </div>


                            <div class="columns medium-12 small-12 margin-top-medium card-3">
                                <div class="responsive-table top-space-20">

                                    <table class="datatable-pdx pdx-table table-borderedPdx head-left">
                                        <thead>
                                        <tr>
                                            <th colspan="6">PDX model Engraftment</th>
                                        </tr>
                                        <tr>
                                            <th> Host Strain Name</th>
                                            <th> Site</th>
                                            <th> Type</th>
                                            <th> Material</th>
                                            <th> Material Status</th>
                                            <th>Passage</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="pdxModel, iter : ${data.pdxModelList}">
                                            <td th:text="${pdxModel.strainName}"></td>
                                            <td th:text="${pdxModel.engraftmentSite}" class="capt-text"></td>
                                            <td th:text="${pdxModel.engraftmentType}" class="capt-text"></td>
                                            <td th:text="${pdxModel.engraftmentMaterial}" class="capt-text"></td>
                                            <td th:text="${pdxModel.engraftmentMaterialState}" class="capt-text"></td>
                                            <td th:text="${pdxModel.passage}" class="capt-text"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>


                            <div class="columns medium-12 small-12 margin-top-medium card-3">
                                <div class="responsive-table top-space-20">

                                    <table class="datatable-pdx pdx-table table-borderedPdx head-left">
                                        <thead>
                                        <tr>
                                            <th colspan="3">Model Quality Control</th>
                                        </tr>
                                        <tr>
                                            <th>Technique</th>
                                            <th>Description</th>
                                            <th>Passage</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="qa, iter : ${data.modelQualityControl}">
                                            <td th:text="${qa.technique}" class="capt-text"></td>
                                            <td th:text="${qa.description}" class="capt-text"></td>
                                            <td th:text="${qa.passage}" class="capt-text"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>



                            <div th:unless="${#lists.isEmpty(data.publications)}"
                                 class="columns medium-12 small-12 margin-top-medium card-3">
                                <div class="responsive-table top-space-20">

                                    <table th:each="pub, iter : ${data.publications}" class="datatable-pdx table-borderedPdx pdx-table head-left">

                                        <thead th:if="${iter.index == 0}">
                                        <tr><th colspan="2"> Publications</th></tr>
                                        </thead>

                                        <tbody>
                                        <tr>
                                            <th class="text-left medium-2"> Title </th>
                                            <td><a th:text="${#strings.capitalizeWords(pub.resultList.result[0].title)}"
                                                   th:href="| https://europepmc.org/article/MED/${pub.resultList.result[0].id} |"
                                                   target="_blank"
                                                   style="white-space: normal;"> Title Text <i class="icon icon-generic" data-icon="x"> </i> </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="text-left medium-2">Authors</th>
                                            <td th:text="${pub.resultList.result[0].authorString}">Bougherara H, Némati F, Nicolas A, ... Decaudin D.</td>
                                        </tr>
                                        <tr>
                                            <th class="text-left medium-2">Publication year</th>
                                            <td th:text="${pub.resultList.result[0].pubYear}"> 2017 </td>
                                        </tr>
                                        <tr>
                                            <th class="text-left medium-2"> Journal</th>
                                            <td th:text="${pub.resultList.result[0].title}">  Journal Title </td>
                                        </tr>


                                        <tr>
                                            <td class="text-left" colspan="2">

                                                <ul class="vertical menu" data-accordion-menu>
                                                    <li>
                                                        <a type="button" th:id="|publication-${iter.index}|" class="primary button card-3b small-2 bold" href="#">
                                                            <span th:id="|btn-text-${iter.index}|"> SHOW ABSTRACT</span> &nbsp;<i class="icon icon-generic" data-icon="P"></i>
                                                        </a>
                                                        <ul class="menu vertical nested topSace10">
                                                            <li>
                                                                <div class="callout card-3" style="white-space: normal; margin-left: -10px;" >
                                                                    <p th:text="${pub.resultList.result[0].abstractText}"> </p>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>

                                            </td>
                                        </tr>

                                        </tbody>
                                    </table>

                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="tabs-panel" id="patients">

                        <section class="row large-12 medium-12 expanded" id="detailsData" style="margin-top: 20px;">


                            <div class="columns medium-12 small-12 margin-top-medium card-3">
                                <div class="responsive-table top-space-20">
                                    <table class="datatable-pdx table-borderedPdx pdx-table head-left">
                                        <thead>
                                        <tr>
                                            <th colspan="2"> Patient </th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        <tr>
                                            <th class="text-left medium-4">Sex</th>
                                            <td th:text="${data.patient.gender}"></td>
                                        </tr>
                                        <tr>
                                            <th class="text-left medium-4">Race / Ethnicity</th>
                                            <td>
                                                <span th:text="${data.race}"></span>
                                                <span th:if="${not ( #strings.isEmpty(data.race) || #strings.isEmpty(data.ethnicity) ) }"> / </span>
                                                <span th:text="${data.ethnicity}"></span>
                                            </td>
                                        </tr>

                                        <tr>
                                            <th class="text-left medium-4"> Derived Model </th>
                                            <td>
                                                <span th:text="${data.modelId}"> present model</span>
                                                <span th:each="relMod:${data.relatedModels}">
                                                    <a th:text="${relMod}" th:href="@{'/pdx/'+${data.dataSource}+'/'+${relMod}}"></a>
                                                </span>
                                            </td>
                                        </tr>


                                        <!--<tr>
                                            <th class="text-left medium-4">Primary Tissue</th>
                                            <td class="text-left" th:text="${data.primaryTissue}"></td>
                                        </tr>

                                        <tr>
                                            <th class="text-left medium-4">Collection Site</th>
                                            <td class="text-left" th:text="${data.collectionSite}"></td>
                                        </tr>

                                        <tr>
                                            <th class="text-left medium-4">Tumor Type</th>
                                            <td class="text-left" th:text="${data.tumorType}"></td>
                                        </tr> -->

                                        </tbody>
                                    </table>
                                </div>
                            </div>



                            <div class="columns medium-12 small-12 margin-top-10 card-3">
                                <div class="responsive-table top-space-20">
                                    <table class="datatable-pdx pdx-table head-left">
                                        <thead>
                                        <tr>
                                            <th> Patient Tumor Collection For PDX Model </th>
                                        </tr>
                                        </thead>
                                    </table>
                                    <table class="pdx-table head-left top-space-n-20">
                                        <thead>
                                        <th></th>
                                        <th:block
                                                th:if="${not #lists.isEmpty(data.patient.collectionEvents)}"
                                                th:each="event, iter : ${data.patient.collectionEvents}">

                                            <th th:if="${event.pdxMouse != data.modelId}"
                                                th:text="${'Collection '} + ${' (Other Model)'}">
                                                Collection
                                            </th>
                                            <th th:if="${event.pdxMouse == data.modelId}"
                                                th:text="${'Collection '} + ${' (Current Model)'}">
                                                Collection
                                            </th>

                                        </th:block>
                                        </thead>
                                        <tbody>

                                        <th:block
                                                th:if="${not #lists.isEmpty(data.patient.collectionEvents)}">

                                            <tr>
                                                <th class="text-left medium-4">Age</th>

                                                <th:block
                                                        th:each="event : ${data.patient.collectionEvents}">
                                                    <td th:text="${event.age}"
                                                        th:class="${#strings.equals(event.pdxMouse, data.modelId) } ? 'highlight-bg' : 'table-focus' ">
                                                        ... AGE ...
                                                    </td>
                                                </th:block>
                                            </tr>

                                            <tr>
                                                <th class="text-left medium-4"> Diagnosis</th>

                                                <th:block
                                                        th:each="event : ${data.patient.collectionEvents}">
                                                    <td th:text="${event.diagnosis}"
                                                        th:class="${#strings.equals(event.pdxMouse, data.modelId) } ? 'highlight-bg' : 'table-focus' ">
                                                        ... DIAGNOSIS ...
                                                    </td>
                                                </th:block>
                                            </tr>

                                            <tr>
                                                <th class="text-left medium-4"> Type</th>

                                                <th:block th:each="event : ${data.patient.collectionEvents}">
                                                    <td th:text="${event.type}"
                                                        th:class="${#strings.equals(event.pdxMouse, data.modelId) } ? 'highlight-bg' : 'table-focus' ">
                                                        ... TYPE ...
                                                    </td>
                                                </th:block>
                                            </tr>

                                            <tr>
                                                <th class="text-left medium0-4"> PDX Mouse</th>
                                                <th:block th:each="event : ${data.patient.collectionEvents}">
                                                    <td th:class="${#strings.equals(event.pdxMouse, data.modelId) } ? 'highlight-bg' : 'table-focus' ">

                                                                        <span th:if="${#strings.equals(event.pdxMouse, data.modelId) }"
                                                                              th:text="${event.pdxMouse}">
                                                                         ... MODELID ...
                                                                        </span>

                                                        <span th:if="${not #strings.equals(event.pdxMouse, data.modelId) }">
                                                                            <a th:text="${event.pdxMouse}"
                                                                               th:href="@{'/pdx/'+${data.dataSource}+'/'+${event.pdxMouse}}"
                                                                               target="_blank"> ... MODELID ... </a>
                                                                        </span>
                                                    </td>

                                                </th:block>
                                            </tr>

                                            <tr>
                                                <th class="text-left medium-4">Collection Site</th>

                                                <th:block
                                                        th:each="event : ${data.patient.collectionEvents}">
                                                    <td th:text="${event.collectionSite}"
                                                        th:class="${#strings.equals(event.pdxMouse, data.modelId) } ? 'highlight-bg' : 'table-focus' ">
                                                        ... COLLECTION SITE ...
                                                    </td>
                                                </th:block>
                                            </tr>

                                        </th:block>

                                        </tbody>
                                    </table>

                                    <table class="pdx-table head-left">
                                        <tbody>
                                        <tr>
                                            <th class="text-left medium-4"> Grade</th>
                                            <td th:if="${#strings.equalsIgnoreCase(data.grade, 'Not Specified') || #strings.equalsIgnoreCase(data.gradeClassification, 'Not Specified')}">
                                                <span th:utext="${data.grade}"></span>
                                            </td>
                                            <td th:if="${not ( #strings.equalsIgnoreCase(data.grade, 'Not Specified') || #strings.equalsIgnoreCase(data.gradeClassification, 'Not Specified') ) }">
                                                <span th:utext="${data.grade}"></span>
                                                <span th:utext="${'(<b> Classification: </b>'+data.gradeClassification+')'}"></span>
                                            </td>
                                        </tr>

                                        <tr>
                                            <th class="text-left medium-4"> Stage</th>
                                            <td th:if="${#strings.equalsIgnoreCase(data.stage, 'Not Specified') || #strings.equalsIgnoreCase(data.stageClassification, 'Not Specified')}">
                                                <span th:utext="${data.stage}"></span>
                                            </td>
                                            <td th:if="${not ( #strings.equalsIgnoreCase(data.stage, 'Not Specified') || #strings.equalsIgnoreCase(data.stageClassification, 'Not Specified') ) }">
                                                <span th:utext="${data.stage}"></span>
                                                <span th:utext="${'(<b> Classification: </b>'+data.stageClassification+')'}"></span>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>






                            <div class="tabs-content style-2" data-tabs-content="example2-tabs">
                                <div class="tabs-panel is-active" id="summary">

                                    <div class="row large-12 medium-12 expanded">


                                    </div>
                                </div>
                            </div>
                        </section>


                        <!-- Disable Current Treatment Table
                        <section class="row large-12 medium-12 expanded"
                                 id="detailsData"
                                 style="margin-top: 20px;"
                                 th:if="${ #bools.isTrue(data.patient.currentTreatmentExists) } ">

                            <div class="row large-12 medium-12 expanded">
                                    <ul class="tabs style-2"   data-deep-link="true" data-tabs id="example2-tabs">
                                        <li class="tabs-title is-active"><a href="#initialDiagnosis" aria-selected="true" style="font-size: 15px; padding: 15px;"> Current Therapy </a></li>
                                    </ul>
                            </div>

                                <div class="tabs-content style-2" data-tabs-content="example2-tabs">
                                    <div class="tabs-panel is-active" id="summary">

                                        <div class="row large-12 medium-12 expanded">

                                            <div class="columns medium-12 small-12 margin-top-10 card-3">
                                                <div class="responsive-table" style="margin-top: 20px;">
                                                    <table class="pdx-table head-left">
                                                        <thead>
                                                        <th> Date Regimen Started </th>
                                                        <th> Regimen </th>
                                                        <th> Dose </th>
                                                        <th> Best Response </th>
                                                        <th> Duration (Months) </th>
                                                        </thead>
                                                        <tbody>


                                                        <th:block th:if="${not #lists.isEmpty(data.patient.treatmentSummaries)}"
                                                                  th:each="treatment : ${data.patient.treatmentSummaries}">

                                                            <tr  th:if="${ #bools.isTrue(treatment.current) } ">

                                                                <th class="text-left medium-4"
                                                                    th:text="${treatment.treatmentDate+' (Current)'}"> ...DATE... </th>

                                                                <td th:text="${treatment.drugNames}"></td>
                                                                <td th:text="${treatment.dose}">  </td>


                                                                <td th:text="${treatment.response}">  </td>
                                                                <td th:text="${treatment.duration}"> </td>

                                                            </tr>

                                                        </th:block>

                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </section> -->


                        <section class="row large-12 medium-12 expanded"
                                 id="detailsData"
                                 style="margin-top: 20px;"
                                 th:if="${ #bools.isTrue(data.patient.treatmentExists) } ">

                            <div class="row large-12 medium-12 expanded">
                                <ul class="tabs style-2" data-deep-link="true" data-tabs id="example2-tabs">
                                    <li class="tabs-title is-active"><a href="#initialDiagnosis"
                                                                        aria-selected="true"
                                                                        style="font-size: 15px; padding: 15px;">
                                        Patient Therapies & Response </a></li>
                                </ul>
                            </div>

                            <div class="tabs-content style-2" data-tabs-content="example2-tabs">
                                <div class="tabs-panel is-active" id="summary">

                                    <!-- Summary first row -->
                                    <div class="row large-12 medium-12 expanded">

                                        <div class="columns medium-12 small-12 margin-top-10 card-3">
                                            <div class="responsive-table" style="margin-top: 20px;">
                                                <table class="pdx-table head-left">
                                                    <thead>
                                                    <th> Date Regimen Started</th>
                                                    <th> Regimen</th>
                                                    <th> Dose</th>
                                                    <th> Best Response</th>
                                                    <th> Duration (Months)</th>
                                                    </thead>
                                                    <tbody>


                                                    <th:block
                                                            th:if="${not #lists.isEmpty(data.patient.treatmentSummaries)}"
                                                            th:each="treatment : ${data.patient.treatmentSummaries}">

                                                        <tr th:if="${ #bools.isFalse(treatment.current) } ">

                                                            <th class="text-left medium-4 capt-text"
                                                                th:text="${treatment.treatmentDate}"> ...DATE...
                                                            </th>

                                                            <td th:text="${treatment.drugNames}"></td>
                                                            <td th:text="${treatment.dose}"></td>
                                                            <td th:text="${treatment.response}"></td>
                                                            <td th:text="${treatment.duration}"></td>

                                                        </tr>

                                                    </th:block>


                                                    <th:block
                                                            th:if="${not #lists.isEmpty(data.patient.treatmentSummaries)}"
                                                            th:each="treatment : ${data.patient.treatmentSummaries}">

                                                        <tr th:if="${ #bools.isTrue(treatment.current) } ">

                                                            <th class="text-left medium-4"
                                                                th:text="${treatment.treatmentDate+' (Current)'}">
                                                                ...DATE...
                                                            </th>

                                                            <td th:text="${treatment.drugNames}"></td>
                                                            <td th:text="${treatment.dose}"></td>


                                                            <td th:text="${treatment.response}"></td>
                                                            <td th:text="${treatment.duration}"></td>

                                                        </tr>

                                                    </th:block>

                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>


                    </div>










                    <div class="tabs-panel is-active" id="variation">


                        <div class="row large-12 medium-12 expanded" id="variationTableSummary">

                            <div class="tab hideContent0" role="tabpanel" th:if="${data.molecularDataRows.size() > 0}">

                                <div th:if="${not #lists.isEmpty(data.molecularDataRows)}"
                                     class="row large-12 medium-12 expanded">

                                    <div class="columns medium-12 small-12 margin-top-10 card-3">
                                        <div class="responsive-table" style="margin-top: 20px;">

                                            <table class="datatable-pdx pdx-table table-borderedPdx head-left" data-tabs
                                                   id="example-tabs">
                                                <thead>
                                                <th>Sample ID</th>
                                                <th>Sample Type</th>
                                                <th>Engrafted Tumor Passage</th>
                                                <th>Data Type</th>
                                                <th>Data Available</th>
                                                <th>Platform Used</th>
                                                <th>Raw Data</th>
                                                </thead>
                                                <tbody>


                                                <tr th:each="dataRow,iter : ${data.molecularDataRows}"
                                                    class="tabs-title" style="float:none; text-transform: capitalize;"
                                                    th:classappend="( ${iter.index} == 0 ) ? 'is-active' : '' ">

                                                    <td th:text="${dataRow.sampleId}"> ...</td>
                                                    <td th:text="${dataRow.sampleType}"> ...</td>
                                                    <td th:text="${'Passage '+dataRow.engraftedTumorPassage}"> ...</td>
                                                    <td th:text="${dataRow.molcharType}"> ...</td>

                                                    <td>
                                                        <span th:if="${dataRow.isVisible == 'YES' and dataRow.dataAssociated != 'YES'}" th:text="'Data is not available in the Finder'"></span>
                                                        <a th:if="${dataRow.dataAssociated == 'YES' or dataRow.isVisible == 'NO'}" class="molecularDataLink"
                                                           style="color: #06369d; text-decoration: none;"
                                                           data-th-attr="data-tabs-target=${dataRow.dataAvailableLabel},  aria-selected=( ${iter.index} == 0 ) ? 'true' : '' "
                                                           th:title="${dataRow.sampleId+' | '+data.mappedOntologyTermLabel+' | '+dataRow.sampleType+' | '+dataRow.engraftedTumorPassage+' | '+dataRow.platformUsedLabel}"
                                                           th:text="'View data'"
                                                           th:id="${'mc___'+dataRow.molcharId}">
                                                           TAB TITLES
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a th:if="${dataRow.platformUsedUrl != null or dataRow.platformUsedLabel == ''}" target="_blank"
                                                           style="color: #06369d; text-decoration: none;"
                                                           th:text="${#strings.replace(dataRow.platformUsedLabel,'_',' ')}"
                                                           th:data-platformurl="${dataRow.platformUsedUrl}"


                                                           onclick="openNewWindow(this.getAttribute('data-platformurl'));">
                                                            ...
                                                        </a>
                                                        <span th:if="${dataRow.platformUsedUrl == null}" th:text="${dataRow.platformUsedLabel}"></span>
                                                    </td>
                                                    <td>
                                                        <a th:text="${dataRow.rawDataLabel}"
                                                           style="color: #06369d; text-decoration: none;"
                                                           th:attr="onclick=|window.open('${dataRow.rawDataLink}')|">
                                                            ...
                                                        </a>
                                                        <span th:if="${dataRow.rawDataLink == ''} " th:text="'Not Available'" ></span>
                                                    </td>
                                                </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>

                                </div>

                            </div>

                        </div>



                        <div id="omicDataContainer">
                            <div class="row large-12 medium-12 expanded top-space-30 ">
                                <ul class="tabs style-2"   data-deep-link="true" data-tabs id="example2-tabs">
                                    <li class="tabs-title is-active">
                                        <a href="#initialDiagnosis"
                                           aria-selected="true"
                                           style="font-size: 15px; padding: 15px;">
                                            Genomic Data (<span id="omicDataCount"></span>) <!-- data.variationDataCount -->
                                        </a>
                                    </li>
                                </ul>
                            </div>




                            <div class="columns medium-12 small-12 card-3" style="padding: 15px;">
                                <div class="columns medium-6 small-12" id="download-data" style="float: right; margin-top:-65px; margin-right:-30px;">
                                    <div class="columns medium-5 small-12 text-right" style="padding: 0px;">
                                        <label class="dropdown">
                                            <a class="button outline secondary">
                                                Download Results <i class="icon icon-functional" data-icon="="></i>
                                            </a>
                                            <input type="checkbox" class="dd-input" id="test">

                                            <ul class="dd-menu">
                                                <th:block th:each="dataRow,iter : ${data.molecularDataRows}">
                                                    <li th:if="${dataRow.isVisible == 'YES' and dataRow.dataAssociated == 'YES'}">
                                                        <a th:href="@{'/pdx/'+${data.dataSource}+'/'+${data.modelId}+'/'+${#strings.replace(dataRow.molcharType,' ','-')}+'/'+${dataRow.molcharId}+'/export'}"
                                                           th:text="${#strings.capitalizeWords(dataRow.molcharType)}"> Download ... </a>
                                                    </li>
                                                </th:block>

                                                <li class="divider"></li>
                                                <!--<li>
                                                    <a target="_blank"
                                                       style="color: #06369d; text-decoration: none;"
                                                       th:onclick=" 'window.open(\''+${'https://pdmr.cancer.gov/content/docs/NCI_Cancer_Gene_Panel.pdf'}+'\')' "> Download All </a>
                                                </li>
                                                <li>
                                                    <a target="_blank"> Downlload All </a>
                                                </li>-->
                                            </ul>
                                        </label>
                                    </div>


                                    <div id="customSearch" class="columns medium-7 small-12 text-right" style="padding: 0px;">
                                        <!-- Datatable Search Box -->
                                    </div>

                                </div>

                                <div class="tabs-content" data-tabs-content="example-tabs">

                                    <div class="tabs-panel is-active"
                                         style="border-top: 1px solid #5ea88f; margin-top:20px;">

                                        <hr id="hrTitle" class="hr-text" data-content="THE PLATFORM">

                                        <div class="table-responsive">

                                            <h4 class="bLine" th:classappend="( true ) ? '' : 'topSpace50' ">

                                                <span class="hdc">Sample ID: </span>
                                                <b class="black" id="clickedSampleId"></b>  &nbsp; &nbsp; <!-- data.techNPassToSampleId['__${technology.key}__'+'__${technology.value[num-1]}__'] -->

                                                <span class="hdc">Histology:</span>
                                                <b class="black" id="modelHistology"></b>  &nbsp; &nbsp; <!-- strings.capitalize(data.diagnosis) -->

                                                <span class="hdc">Tumor Type: </span>
                                                <b class="black" id="clickedTumorType">Engrafted Tumor</b>  &nbsp; &nbsp;

                                                <span class="hdc">Passage: </span>
                                                <b class="black" id="clickedPassage"></b>  &nbsp; &nbsp;

                                                <span class="hdc">Platform: </span>
                                                <b class="black" id="clickedTech"></b>   &nbsp; &nbsp;

                                            </h4>

                                            <div style="text-align: center;"> <img th:src="@{/images/loading2.gif}" id="preLoader"/> </div>
                                            <div class="responsive-table" style="margin-top: 20px;" id="variationTableData">

                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tabs-panel" id="dosing_studies">
                        <div th:if="${not #lists.isEmpty(data.dosingStudy)}">

                            <div class="columns medium-12 small-12 margin-top-10 card-3">
                                <div class="responsive-table" style="margin-top: 20px;">

                                    <div th:if="${data.dosingStudyProtocolUrl} != null" class="drug_spacing">
                                        <a th:href="${data.dosingStudyProtocolUrl}">Dosing study protocol</a>
                                    </div>

                                    <table class="datatable-pdx pdx-table table-borderedPdx head-left">
                                        <thead>
                                        <th>Drug</th>
                                        <th>Dose</th>
                                        <th>Response</th>
                                        </thead>
                                        <tbody>
                                        <tr th:each="drugData, iter : ${data.dosingStudy}">
                                            <td th:text="${drugData.drugName}"></td>
                                            <td th:text="${drugData.dose}"></td>
                                            <td th:text="${drugData.response}"></td>
                                        </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>

                        </div>

                        <div th:if="${#lists.isEmpty(data.dosingStudy)}"></div>
                    </div>

                </div>
            </section>
        </section>
    </div>
    <!-- End suggested layout containers / #content -->
    <!--/*/ <th:block th:include="fragments/shared :: footer"></th:block> /*/-->
</div>
<!-- JavaScript -->

<script type='text/javascript' th:src="@{/js/banner-gdpr.js}"></script>
<div id="data-protection-message-configuration"
     data-message="Your message and links here."
     data-service-id="ebi" data-data-protection-version="0.1">
</div>

<script src="https://ebi.emblstatic.net/web_guidelines/EBI-Framework/v1.2/libraries/Choices/assets/scripts/dist/choices.min.js"></script>
<script src="https://ebi.emblstatic.net/web_guidelines/EBI-Framework/v1.3/libraries/foundation-6/js/foundation.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery.highlightRegex/0.1.2/highlightRegex.min.js"></script>
<script th:src="@{/js/script.js}"></script>
<script th:src="@{/js/pdxFinder.js}"></script>
<script th:src="@{/js/pdxfinder-behaviour.js}"></script>
<!--<script th:src="@{/js/main.js}"></script>-->


<script type="text/javascript" language="javascript" th:inline="javascript">

    let publications = [[${data.publications}]];
    publications.forEach((publication, iter, publications) => {
        document.querySelector(`#publication-${iter}`)
            .addEventListener('click', () => { PDXFinder.switchButtonText(`#btn-text-${iter}`); });
    });

    var modelId = [[${data.modelId}]];
    var dataSrc = [[${data.dataSource}]];
    jQuery(document).ready(function () {
        jQuery(".molecularDataLink").on("click", function () {
            $('#omicDataContainer').show();
            getMolecularDataTable(jQuery(this).attr("id"), jQuery(this).attr("title"));
        });
    });

    // We define the function
    function drawTable(tableId, apiURL) {
        var l = jQuery("#tableId tr").length;
        var dataTable = $('#' + tableId).DataTable({
            iDisplayLength: 10,
            serverSide: true,
            ajax: {
                url: apiURL, // json datasource
                type: "post",  // method  , by default get

                error: function () {  // error handling
                    $(".pdxFinder-grid-error").html("");
                    $("#" + tableId).append('<tbody class="pdxFinder-grid-error"><tr><th colspan="3">No data found in the server</th></tr></tbody>');
                    $("#pdxFinder-grid_processing").css("display", "none");
                }
            },
            dom: "frtiS",
            scrollY: 350,
            scrollX: true,
            deferRender: true,
            responsive: true,
            bAutoWidth: true,
            scrollCollapse: true,
            scroller: {
                loadingIndicator: true,
                rowHeight: 30
            }
        });
        $(window).bind('resize', function () {
            dataTable.fnAdjustColumnSizing();
        });
    }

    function initTabs(cnt) {
        for (var i = 0; i < 5; i++) {
            document.getElementsByClassName("hideContent" + cnt)[i].style.position = "static";
        }
    }

    // Check if variation tab is deeplinked on page load:
    $(document).ready(function () {
        var hash = window.location.hash;
        if (hash == "#variation") {
            for (var i = 0; i < 5; i++) {
                var content = document.getElementsByClassName("hideContent0")[i];
                if (content !== undefined) {
                    content.style.position = "static";
                }
            }
        }
    });
</script>

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Dataset",
    "@id": "http://www.pdxfinder.org/",
    "url": "http://www.pdxfinder.org",
    "name": "PDX  Finder:  An  Open  and  Global  Catalogue  of  Patient  Tumor  Derived Xenograft  Models",
    "description": "PDX  Finder is  a  comprehensive  open  global  catalogue  of  PDX  models  and  their  associated  data  across  resources.  PDX  Finder allows  is using  multiple  search  and  filtering  attributes  (e.g:  tumor  histology,  molecular variant, drug-response). Critical PDX attributes are  harmonized against ontological terms and integrated  into  a  cohesive  data  model  which  supports  consistent  searching  across  sources. Additionally,  specific pages and links to the PDX providers are  provided  to  allow  users  to  contact  the  relevant  institution  for  further  collaboration/model  acquisition.This dataset contains all the PDX  metadata and data from different providers",
    "keywords": "PDX, Patient derived xenografts, cancer models, cancer, omic, drug response, oncology, preclinical",
    "creator": {"@type": "Organization","name": "PDX Finder"},
    "dateCreated": "2018",
    "dateModified": "2018",
    "citation": "https://doi.org/10.1101/291443"
}
</script>
</body>
</html>
