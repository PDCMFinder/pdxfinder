<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>PDX Finder - Search</title>
    <meta name="description" content="PDX Finder"/><!-- Describe what this page is about -->
    <meta name="keywords" content="Framework, Life Sciences"/>
    <!-- A few keywords that relate to the content of THIS PAGE (not the whole project) -->
    <meta name="author" content="PDX Finder"/>
    <meta name="HandheldFriendly" content="true"/>
    <meta name="MobileOptimized" content="width"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>

    <link rel="apple-touch-icon" sizes="180x180"
          href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/apple-touch-icon.png?v=1">
    <link rel="icon" type="image/png" sizes="32x32"
          href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/favicon-32x32.png?v=1">
    <link rel="icon" type="image/png" sizes="16x16"
          href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/favicon-16x16.png?v=1">
    <link rel="manifest" href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/manifest.json?v=1">
    <link rel="mask-icon" href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/safari-pinned-tab.svg?v=1"
          color="#0032a0">
    <link rel="shortcut icon" href="https://ebiwd.github.io/pdx-visual-framework/images/favicons/favicon.ico?v=1">
    <meta name="apple-mobile-web-app-title" content="PDX Finder">
    <meta name="application-name" content="PDX Finder">
    <meta name="msapplication-config"
          content="https://ebiwd.github.io/pdx-visual-framework/images/favicons/browserconfig.xml?v=1">
    <meta name="theme-color" content="#0032a0">
    <!-- Add information on the life cycle of this page -->
    <meta name="ebi:owner" content="PDX"/> <!-- Who should be contacted about changes -->
    <meta name="ebi:review-cycle" content="60"/> <!-- In days, how often should the content be reviewed -->
    <meta name="ebi:last-review" content="2017-11-14"/> <!-- The last time the content was reviewed -->
    <meta name="ebi:expiry" content="2018-01-20"/> <!-- When this content is no longer relevant -->

    <!-- If you link to any other sites frequently, consider optimising performance with a DNS prefetch -->
    <!-- <link rel="dns-prefetch" href="//www.ebi.ac.uk" /> -->

    <!-- CSS: implied media=all -->
    <!-- CSS concatenated and minified via ant build script-->

    <!-- <link rel="stylesheet" href="https://dev.ebi.emblstatic.net/web_guidelines/EBI-Framework/v1.3/css/ebi-global.css" type="text/css" media="all" /> -->
    <link rel="stylesheet" href="https://dev.ebi.emblstatic.net/web_guidelines/EBI-Icon-fonts/v1.2/fonts.css"
          type="text/css" media="all"/>
    <!-- Import Choice Library stylesheet-->
    <link rel="stylesheet"
          href="https://ebi.emblstatic.net/web_guidelines/EBI-Framework/v1.2/libraries/Choices/assets/styles/css/choices.min.css">
    <!-- Use this CSS file for any custom styling -->
    <link rel="stylesheet" href="/css/app.css" type="text/css" media="all"/>

    <!-- If you have a custom header image or colour -->
    <!--
    <meta name="ebi:masthead-color" content="#000" />
    <meta name="ebi:masthead-image" content="//www.ebi.ac.uk/web_guidelines/EBI-Framework/images/backgrounds/embl-ebi-background.jpg" />
    -->

    <!-- you can replace this with theme-[projectname].css. See http://www.ebi.ac.uk/web/style/colour for details of how to do this -->
    <!-- also inform ES so we can host your colour palette file -->
    <!-- <link rel="stylesheet" href="https://dev.ebi.emblstatic.net/web_guidelines/EBI-Framework/v1.3/css/theme-embl-petrol.css" type="text/css" media="all" /> -->
    <!-- end CSS-->
</head>

<body class="level2"><!-- add any of your classes or IDs -->


<div class="expand-menu show-for-small-only">
    <div class="columns small-2 full-height close-wrapper text-center padding-vertical-15">
        <a><i class="icon icon-functional" data-icon="x" data-responsive-toggle="expand-menu"></i></a>
    </div>

    <div class="columns small-10 background-color-primary full-height">
        <ul class="vertical menu pdx-mobile-menu" data-responsive-menu="drilldown small-accordion">
            <li><a href="#">Home</a></li>
            <li class="active"><a href="/search">Search</a></li>
            <li><a href="#">PDX Standards</a></li>
            <li><a href="#">Methods</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </div>
</div>

<div content="content-wrapper">
    <div id="skip-to">
        <a href="#content">Skip to main content</a>
    </div>

    <div id="content">
        <div data-sticky-container>
            <header id="masthead" class="masthead" data-sticky data-options="marginTop: 0">
                <div class="masthead-inner row">
                    <div class="columns medium-2 small-4 log-column" id="local-title">
                        <h1><a href="index.html" title="Back to [service-name] homepage"><img src="images/logo.png"
                                                                                              class="padding-15"/></a>
                        </h1>
                    </div>
                    <!-- Desktop Menu-->
                    <div class="columns medium-10 menu-column padding-vertical-30 hide-for-small-only" id="local-nav">
                        <nav>
                            <ul id="local-nav2" class="dropdown menu main-menu float-right" data-dropdown-menu
                                data-description="navigational">
                                <li><a href="#">Home</a></li>
                                <li class="active"><a href="/search">Search</a></li>
                                <li><a href="#">PDX Standards</a></li>
                                <li><a href="#">Methods</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </nav>
                    </div>
                    <!-- Mobile Menu -->
                    <div class="columns small-4 show-for-small-only padding-vertical-15 text-right">
                        <a class="menu-toggle"><i class="icon icon-functional" data-icon="M" data-toggle
                                                  data-responsive-toggle="expand-menu"></i></a>
                    </div>
                </div>
            </header>
        </div>

        <!-- Suggested layout containers -->
        <section id="main-content-area" role="main">
            <!-- Your menu structure should make a breadcrumb redundant, but if a breadcrump is needed uncomment the below -->
            <nav aria-label="You are here:" role="navigation">
                <ul class="breadcrumbs row">
                    <li><a href="#">Home</a></li>
                    <li>
                        <span class="show-for-sr">Current: </span> Blank boilerplate
                    </li>
                </ul>
            </nav>

            <!-- Search FORM Section -->
            <section>
                <form class="main-search">
                    <div class="row">
                        <fieldset>
                            <div class="margin-bottom-none small-collapse">
                                <!-- Large screen -->
                                <div class="columns small-2 small-push-2 margin-bottom-small padding-top-large hide-for-small-only">
                                    Enter your search here
                                </div>
                                <!-- Small screen-->
                                <div class="columns small-7 medium-push-2 small-push-3  margin-bottom-none search-text-wrapper show-for-small-only">
                                    Enter your search here
                                </div>

                                <div class="columns small-7 medium-push-2 small-push-3  margin-bottom-none search-text-wrapper">
                                    <input id="query" class="margin-bottom-none" title="EBI Search" tabindex="2"
                                           type="text" name="query" value="" size="35" maxlength="2048"
                                           placeholder="E.G. Breast cancer" required="" th:value="${query}">
                                    <span class="form-error margin-top-small">
                        You need to enter a search query.
                    </span>
                                </div>
                                <div class="columns small-1 medium-push-2 small-push-3 margin-bottom-none ">
                                    <input id="search_submit" class="button icon icon-functional margin-bottom-none"
                                           tabindex="3" name="submit1" type="submit" value="1" style="line-height:.9">
                                </div>
                                <!-- <input id="allebi" type="hidden" name="db" value="allebi" checked="checked" /> -->
                                <input type="hidden" name="requestFrom" value="ebi_index">
                            </div>
                        </fieldset>
                        <fieldset>
                            <div class="medium-push-4 small-push-3 small-8 small padding-top-medium">
                                <a href="" id="main-search-advanced-link"
                                   class="font-color-dark-gray font-style-underline ">Advanced Search</a>
                            </div>
                        </fieldset>
                    </div>
                </form>
            </section>

            <!-- Search Result Message & Export Section -->
            <section class="row padding-vertical-30">
                <div class="columns medium-8 small-6 padding-vertical-15">
                    <span th:if="${#strings.isEmpty(query)}">Viewing <span th:remove="tag" th:text="${totalResults}">a number of</span> result<span
                            th:if="${totalResults ne 1}">s</span>.</span>
                    <span th:unless="${#strings.isEmpty(query)}">Your Search for '<span th:remove="tag"
                                                                                        th:text="${query}">Whatever</span>' returned <span
                            th:text="${totalResults}">a number of</span> result<span
                            th:if="${totalResults ne 1}">s</span>.</span>
                </div>

                <div class="columns medium-4 small-6 text-right">
                    <a href="#" class="button more outline secondary large">Export Results</a>
                </div>
            </section>

            <!-- Search Result and Filter Section -->
            <section class="row expanded padding-right-large padding-left-large">
                <div class="columns medium-3">
                    <h4 class="block-title clearfix"><span class="float-left">Filter By:</span></h4>

                    <ul class="accordion pdx-accordion-1" data-accordion data-multi-expand="true">


                        <li class="accordion-item is-active" data-accordion-item>
                            <!-- Accordion tab title -->
                            <a href="#" class="accordion-title">Patient / Tumor</a>

                            <!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. -->
                            <div class="accordion-content" data-tab-content>

                                <ul class="accordion pdx-accordion-2" data-accordion data-multi-expand="true"
                                    data-allow-all-closed="true">
                                    <li class="accordion-item" data-accordion-item id="age_filter">
                                        <a href="#" class="accordion-title">Age</a>


                                        <div class="accordion-content" data-tab-content>

                                            <div class="large-form">

                                                <div class="checkbox-item" th:each="instance:${facet_options['patient_age_options']}">
                                                    <input th:id="'patient_age__' + ${instance}" type="checkbox" class="age filter"/>
                                                    <label th:attr="for='patient_age__'+${instance}"><span th:text="${instance}"></span></label>
                                                </div>


                                            </div>
                                        </div>
                                    </li>
                                </ul>



                                <ul class="accordion pdx-accordion-2" data-accordion data-multi-expand="true"
                                    data-allow-all-closed="true">
                                    <li class="accordion-item" data-accordion-item id="cancer_system_filter">
                                        <a href="#" class="accordion-title">Cancer by system</a>


                                        <div class="accordion-content" data-tab-content>

                                            <div class="large-form">

                                                <div class="checkbox-item" th:each="instance:${facet_options['cancer_system_options']}">
                                                    <input th:id="'cancer_system__' + ${#strings.replace(instance, ' ', '_')}" type="checkbox" class="cancer_system filter"/>
                                                    <label th:attr="for='cancer_system__'+${#strings.replace(instance, ' ', '_')}"><span th:text="${instance}"></span></label>
                                                </div>


                                            </div>
                                        </div>
                                    </li>
                                </ul>






                            </div>
                        </li>



                                                                        <li class="accordion-item is-active" data-accordion-item>
                                                                            <!-- Accordion tab title -->
                            <a href="#" class="accordion-title">PDX model</a>

                            <!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. -->
                            <div class="accordion-content" data-tab-content>
                                <ul class="accordion pdx-accordion-2" data-accordion data-multi-expand="true"
                                    data-allow-all-closed="true">

                            <li class="accordion-item" data-accordion-item id="datasource_filter">
                                 <a href="#" class="accordion-title">Datasource</a>

                            <div class="accordion-content" data-tab-content>
                                <div class="large-form">


                                    <div class="checkbox-item" th:each="instance:${facet_options['datasource_options']}">
                                        <input th:id="'datasource__' + ${instance}" type="checkbox" class="datasource filter"/>
                                        <label th:attr="for='datasource__'+${instance}"><span th:text="${instance}"></span></label>
                                    </div>



                                </div>
                            </div>
                        </li>






                                </ul>
                            </div>
                        </li>


                        <li class="accordion-item is-active" data-accordion-item>
                            <!-- Accordion tab title -->
                            <a href="#" class="accordion-title">Molecular characterization</a>

                            <!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. -->
                            <div class="accordion-content" data-tab-content>
                                <select name="molchar" required id="molchar" class="form-control choices" multiple>

                                </select>
                            </div>
                        </li>


                    </ul>
                </div>

                <div class="columns medium-9">
                    <div class="responsive-table">
                        <table class="unstriped pdx-table">
                            <thead>
                            <tr>
                                <th>Model</th>
                                <th>Histology</th>
                                <th>Primary site</th>
                                <th>Collection site</th>
                                <th>Type</th>
                                <th>Age</th>
                                <th>Gender</th>
                                <th>Treatment history</th>
                                <th>Available data</th>
                                <th>Center</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="model, iter : ${results}">
                                <td><a th:text="${model.externalId}" th:href="@{'/pdx/'+${model.datasource}+'/'+${model.externalId}}"></a></td>
                                <td th:text="${model.mappedOntologyTerm}">ontology term</td>
                                <td th:text="${model.sampleOriginTissue}">origin tissue</td>
                                <td th:text="${model.sampleSampleSite}">sample site</td>
                                <td th:text="${model.sampleTumorType}">Metastatic</td>
                                <td th:text="${model.patientAge}">Age</td>
                                <td th:text="${model.patientGender}">Gender</td>
                                <td th:text="${model.treatmentHistory}">history</td>
                                <td th:text="${model.dataAvailable}">data</td>
                                <td th:text="${model.datasource}">Center <a href="https://www.google.co.uk/search?q=jax"
                                                                         target="_blank" data-tooltip
                                           aria-haspopup="true" class="has-tip" data-disable-hover="false" tabindex="1"
                                           title="Some text about JAX"><i class="icon icon-generic"
                                                                          data-icon="i"></i></a></td>
                            </tr>

                            </tbody>
                        </table>
                    </div>

                    <div class="row">

                        <div class="columns medium-8 small-6 padding-vertical-10">
                            <ul class="pagination pdx-pagination" role="navigation" aria-label="Pagination">
                                <li class="pagination-previous"
                                    th:classappend="${#strings.equals(page, '1')} ? 'disabled'">
                                    <span th:if="${#strings.equals(page, '1')}" aria-label="Previous page">First </span>
                                    <a th:unless="${#strings.equals(page, '1')}"
                                       th:href="'?' + ${facets_string} + '&page=1'" aria-label="First page">First </a>
                                </li>
                                <li class="pagination-previous"
                                    th:classappend="${#strings.equals(page, '1')} ? 'disabled'">
                                    <span th:if="${#strings.equals(page, '1')}"
                                          aria-label="Previous page">Previous </span>
                                    <a th:unless="${#strings.equals(page, '1')}"
                                       th:href="'?' + ${facets_string} + '&page=' + ${page - 1}"
                                       aria-label="Previous page">Previous </a>
                                </li>

                                <li th:each="i: ${#numbers.sequence(beginIndex, endIndex)}"
                                    th:classappend="${i == page} ? 'current'">
                                    <a th:href="'?' + ${facets_string} + '&page=' + ${i}" th:aria-label="'Page ' + ${i}"
                                       th:text="${i}">1</a>
                                </li>

                                <li class="pagination-next"
                                    th:classappend="${#strings.equals(page, #strings.toString(numPages))} ? 'disabled' ">
                                    <span th:if="${#strings.equals(page, #strings.toString(numPages))}"
                                          aria-label="Next page">Next </span>
                                    <a th:unless="${#strings.equals(page, #strings.toString(numPages))}"
                                       th:href="'?' + ${facets_string} + '&page=' + ${page + 1}" aria-label="Next page">Next </a>
                                </li>
                                <li class="pagination-next"
                                    th:classappend="${#strings.equals(page, #strings.toString(numPages))} ? 'disabled' ">
                                    <span th:if="${#strings.equals(page, #strings.toString(numPages))}"
                                          aria-label="Last page">Last </span>
                                    <a th:unless="${#strings.equals(page, #strings.toString(numPages))}"
                                       th:href="'?' + ${facets_string} + '&page=' + ${numPages}" aria-label="Last page">Last </a>
                                </li>
                            </ul>
                        </div>

                        <div class="columns medium-4 small-6 text-right">
                            <a href="#" class="button more outline secondary large">Export Results</a>
                        </div>
                    </div>


                </div>
            </section>

        </section>
        <!-- Optional local footer (insert citation / project-specific copyright / etc here -->
        <!--
        <footer id="local-footer" class="local-footer" role="local-footer">
          <div class="row">
            <span class="reference">How to reference this page: ...</span>
          </div>
        </footer>
        -->
        <!-- End optional local footer -->
    </div>
    <!-- End suggested layout containers / #content -->

    <footer>
        <div id="global-footer" class="global-footer row">
            <div class="columns medium-4">
                <h3 class="highlight green">Quick links</h3>
                <ul class="no-bullet">
                    <li>Unorderred list</li>
                    <li>Unorderred list</li>
                    <li>Unorderred list</li>
                </ul>
            </div>

            <div class="columns medium-4">
                <h3 class="highlight green">Contacts</h3>
                <ul class="no-bullet">
                    <li><a href="#">Link</a></li>
                    <li>Unorderred list</li>
                    <li>Unorderred list</li>
                </ul>
            </div>

            <div class="columns medium-4">
                <h3 class="highlight">&nbsp;</h3>
                A joint procet
            </div>
        </div>
    </footer>
</div>
<!-- JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.3/libraries/foundation-6/js/foundation.js"></script>
<script src="https://ebi.emblstatic.net/web_guidelines/EBI-Framework/v1.2/libraries/Choices/assets/scripts/dist/choices.min.js"></script>
<script src="/js/script.js"></script>
<script src="/js/jquery.dataTables.js"></script>
<script src="/js/pdxFinder.js"></script>

<script type="text/javascript" language="javascript" th:inline="javascript">

    var ageFilters = [[${patient_age_selected}]];
    var dsFilters = [[${datasource_selected}]];
    var cancerSystemFilters = [[${cancer_system_selected}]];

    console.log("before updating");


    jQuery(document).ready(function() {

        updateFilters(ageFilters, cancerSystemFilters, dsFilters);
        console.log("updated");

        //Add eventlistener to fields with filter class
        jQuery('.filter').change( function(){

            redirectPage();
        });

        //Add eventlistener to search field's button
        jQuery('#search_submit').click( function(){

            redirectPage();
        });

    });

</script>

<script>
/*
    const choices = new Choices('#query', {
        silent: false,
        items: ["Alpha", "Bravo", "Charlie"],
        choices: [],
        loadingText: 'Loading...',
        noResultsText: 'No results found'


    });
*/
</script>
<!-- <script src="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.3/js/foundationExtendEBI.js"></script> -->
<!-- <script type="text/JavaScript">$(document).foundationExtendEBI();</script> -->

<!-- Google Analytics details... -->
<!-- Change UA-XXXXX-X to be your site's ID -->
<!-- <script type="text/javascript">!function(e,a,n,t,i,o,c){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=a.createElement(n),c=a.getElementsByTagName(n)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(o,c)}(window,document,"script",0,"ga"),ga("create","UA-629242-1",{cookieDomain:"auto"}),ga("require","linkid","linkid.js"),ga("set","anonymizeIp",!0),ga("send","pageview");</script> -->
</body>
</html>